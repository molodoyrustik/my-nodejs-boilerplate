{"version":3,"file":null,"sources":["../src/config/index.js","../src/middlewares/accessLogger.js","../src/middlewares/reqParser.js","../src/middlewares/catchError.js","../src/middlewares/reqLog.js","../src/middlewares/extendReqRes.js","../src/middlewares/index.js","../src/models/Domain/Domain.js","../src/models/User/User.js","../src/models/Token/Token.js","../src/models/index.js","../src/resourses/Auth/Auth.js","../src/resourses/DomainController/DomainController.js","../src/resourses/index.js","../src/api/auth/auth.js","../src/api/domain/domain.js","../src/api/api.js","../src/App.js","../src/index.js"],"sourcesContent":["global.__DEV__ = true;\n// __STAGE__\nglobal.__PROD__ = false;\n\nexport default {\n  name: 'Your super app',\n  port: 3001,\n  db: {\n    url: 'mongodb://localhost/test',\n  },\n  jwt: {\n    secret: 'YOUR_SECRET',\n  },\n  nodemailer: {\n    service: 'mail',\n    host: 'smtp.mail.ru',\n    auth: {\n      user: 'molodoyrustik@mail.ru',\n      pass: 'molodoy'\n    }\n  },\n};\n","import leftPad from 'left-pad';\n\nfunction levelFn(data) {\n  if (data.err || data.status >= 500 || data.duration > 10000) { // server internal error or error\n    return 'error';\n  } else if (data.status >= 400 || data.duration > 3000) { // client error\n    return 'warn';\n  }\n  return 'info';\n}\n\nfunction logStart(data) {\n  return `${leftPad(data.method, 4)} ${data.url} started reqId=${data.reqId}`;\n}\n\nfunction logFinish(data) {\n  const time = (data.duration || 0).toFixed(3);\n  const length = data.length || 0;\n  return `${leftPad(data.method, 4)} ${data.url} ${leftPad(data.status, 3)} ${leftPad(time, 7)}ms ${leftPad(length, 5)}b reqId=${data.reqId}`;\n}\n\nexport default (params) => ([\n  (req, res, next) => {\n    const data = {}\n    if (!req.log) throw 'has no req.log!'\n    const log = req.log.child({\n      component: 'req',\n    });\n\n    data.reqId = req.reqId\n    data.method = req.method\n    if (req.ws) data.method = 'WS'\n    data.host = req.headers.host\n    data.url = (req.baseUrl || '') + (req.url || '-')\n    data.referer = req.header('referer') || req.header('referrer')\n    data.ip = req.ip || req.connection.remoteAddress ||\n        (req.socket && req.socket.remoteAddress) ||\n        (req.socket.socket && req.socket.socket.remoteAddress) ||\n        '127.0.0.1'\n\n\n    if (__DEV__) {\n      log.debug(data, logStart(data));\n      if (req.body) {\n        log.trace(JSON.stringify(req.body));\n      }\n    }\n\n    const hrtime = process.hrtime();\n    function logging() {\n      data.status = res.statusCode\n      data.length = res.getHeader('Content-Length')\n\n      const diff = process.hrtime(hrtime);\n      data.duration = diff[0] * 1e3 + diff[1] * 1e-6\n\n      log[levelFn(data)](data, logFinish(data));\n    }\n    res.on('finish', logging);\n    res.on('close', logging);\n    next();\n  }\n])\n","import cookieParser from 'cookie-parser'\nimport bodyParser from 'body-parser'\nimport cors from 'cors'\n\nexport default (ctx) => ([\n  bodyParser.json(),\n  bodyParser.urlencoded({ extended: true }),\n  cookieParser(),\n  cors(),\n])\n","export default (ctx) => (\n  (err, req, res, next) => {\n    if(req && req.log && req.log.error){\n      req.log.error({\n        err,\n        query: req.query,\n        body: req.body,\n        headers: req.headers\n      }, (err || {}).stack)\n    } else {\n      console.log(err)\n    }\n    res.status(err.status || 500)\n    return res.json([]);\n    if (res.err) return res.err(err)\n    return res.json(err)\n  }\n)\n","import uuid from 'uuid'\n\nexport default (params) => ([\n  (req, res, next) => {\n    if (__PROD__) {\n      req.reqId = uuid.v4()\n    } else {\n      global.reqId = 1 + (global.reqId || 0)\n      req.reqId = global.reqId\n    }\n    if (params.log) {\n      req.log = params.log.child({\n        reqId: req.reqId,\n      });\n    }\n    next()\n  },\n])\n","import _ from 'lodash'\nexport default (ctx) => ([\n  (req, res, next) => {\n    if (ctx.requests) {\n      _.forEach(ctx.requests, (val, key) => {\n        req[key] = val.bind(req)\n      })\n      // if (req.allParams) {\n      //   req.params = req.allParams.bind(req)()\n      // }\n    }\n    if (ctx.responses) {\n      _.forEach(ctx.responses, (val, key) => {\n        res[key] = val.bind(res)\n      })\n    }\n    next()\n  }\n])\n","// fs\nimport accessLogger from './accessLogger'\nimport reqParser from './reqParser'\nimport catchError from './catchError'\nimport reqLog from './reqLog'\nimport extendReqRes from './extendReqRes'\n\nexport default function (ctx) {\n  return {\n    accessLogger: accessLogger(...arguments),\n    reqParser: reqParser(...arguments),\n    catchError: catchError(...arguments),\n    reqLog: reqLog(...arguments),\n    extendReqRes: extendReqRes(...arguments),\n  }\n}\n","import _ from 'lodash'\r\nimport mongoose from 'mongoose'\r\n\r\nconst DomainSchema = new mongoose.Schema({\r\n  id: {\r\n    type: String,\r\n    index: { unique: true},\r\n    trim: true,\r\n  },\r\n  url: {\r\n    type: String,\r\n    trim: true,\r\n  }\r\n})\r\n\r\nexport default {\r\n  Domain: mongoose.model('Domain', DomainSchema),\r\n  DomainSchema: DomainSchema\r\n}\r\n","import _ from 'lodash'\nimport jwt from 'jsonwebtoken'\nimport bcrypt from 'bcryptjs'\nimport Promise from 'bluebird'\nconst bcryptGenSalt = Promise.promisify(bcrypt.genSalt)\nconst bcryptHash = Promise.promisify(bcrypt.hash)\nconst bcryptCompare = Promise.promisify(bcrypt.compare)\nimport mongoose from 'mongoose'\n\nimport obj from '../Domain/Domain';\n\n\n\nexport default (ctx) => {\n  if (!ctx.log) throw '!log'\n\n  const DomainSchema = obj.DomainSchema;\n\n  const schema = new mongoose.Schema({\n    email: {\n      type: String,\n      required: true,\n      index: { unique: true },\n      trim: true,\n    },\n    id: {\n      type: String,\n      index: { unique: true},\n      trim: true,\n    },\n    password: {\n      type: String,\n    },\n    domains: [DomainSchema]\n  }, {\n    collection: 'user',\n    timestamps: true,\n  })\n\n  schema.statics.isValidEmail = function (email) {\n    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email)\n  }\n  schema.statics.generatePassword = function (length = 10) {\n    return Math.random().toString(36).substr(2, length)\n  }\n  schema.methods.toJSON = function () {\n    return _.omit(this.toObject(), ['password'])\n  }\n  schema.methods.getIdentity = function (params) {\n    const object = _.pick(this.toObject(), ['_id', 'email', 'id'])\n    if (!params) return object\n    return Object.assign(object, params)\n  }\n  schema.methods.generateAuthToken = function (params) {\n    return jwt.sign(this.getIdentity(params), ctx.config.jwt.secret)\n  }\n  schema.methods.verifyPassword = async function (password) {\n    return await bcryptCompare(password, this.password)\n  }\n\n  const SALT_WORK_FACTOR = 10\n  schema.pre('save', function (next) {\n    if (!this.isModified('password')) return next();\n    return bcryptGenSalt(SALT_WORK_FACTOR)\n    .then(salt => {\n      bcryptHash(this.password, salt)\n      .then(hash => {\n        this.password = hash\n        next();\n      })\n    })\n    .catch(next)\n  });\n\n  return mongoose.model('User', schema);\n}\n","import _ from 'lodash'\r\nimport jwt from 'jsonwebtoken'\r\nimport bcrypt from 'bcryptjs'\r\nimport Promise from 'bluebird'\r\nconst bcryptGenSalt = Promise.promisify(bcrypt.genSalt)\r\nconst bcryptHash = Promise.promisify(bcrypt.hash)\r\nconst bcryptCompare = Promise.promisify(bcrypt.compare)\r\nimport mongoose from 'mongoose'\r\n\r\nexport default (ctx) => {\r\n  if (!ctx.log) throw '!log'\r\n\r\n  const schema = new mongoose.Schema({\r\n    id: {\r\n      type: String,\r\n      index: { unique: true},\r\n      trim: true,\r\n    },\r\n    userID: {\r\n      type: String,\r\n      index: { unique: true},\r\n      trim: true,\r\n    },\r\n    forgotEmailToken: {\r\n      type: String,\r\n      trim: true,\r\n    },\r\n  }, {\r\n    collection: 'token',\r\n    timestamps: true,\r\n  })\r\n\r\n  return mongoose.model('Token', schema);\r\n}\r\n","import User from './User/User.js';\nimport Token from './Token/Token.js';\nimport DomainObject from './Domain/Domain';\n\n\n\nexport default function () {\n  return {\n    Domain: DomainObject.Domain(...arguments),\n    User: User(...arguments),\n    Token: Token(...arguments),\n    scheme: {\n      DomainSchema: DomainObject.DomainSchema,\n    }\n  }\n}\n","import jwt from 'express-jwt'\nimport uniqid from 'uniqid';\nimport crypto from 'crypto';\nimport mongoose from 'mongoose';\n\nexport function canonize(str) {\n  return str.toLowerCase().trim()\n}\n\nexport default (ctx) => {\n  const User = ctx.models.User;\n  const Token = ctx.models.Token;\n  const Domain = ctx.models.Domain;\n  const transporter = ctx.transporter;\n\n  const resourse = {}\n\n  resourse.validate = async function (req, res) {\n    if(req.user) {\n      const user = await User.findById(req.user._id)\n      if (!user) return res.status(404).json([{validate: false, message: 'Пользователь не найден в базе'}]);\n      return [{\n        validate: true,\n        __pack: 1,\n        jwt: req.user,\n        user: user,\n      }]\n    }\n    return res.status(404).json([{validate: false, message: 'Пользователь не найден в базе'}]);\n  }\n\n  resourse.getUserFields = function (req) {\n    return req.body;\n  }\n\n  resourse.validationUserFields = function(userFields, res) {\n    let valid = {\n      isValid: false,\n      message: []\n    }\n\n    if(!userFields.captcha) {\n      valid.isValid = true;\n      valid.message = [{signup: false, message: 'Параметр captcha не передан или введен неверно'}]\n    }\n\n    if(!userFields.email || !userFields.password) {\n      valid.isValid = true;\n      valid.message = [{signup: false, message: 'Параметрs email или password не передан'}]\n    }\n\n    return valid;\n  }\n\n  resourse.getUserCriteria = function (req, res) {\n    const params = req.body\n    if (params.email) {\n      return {\n        email: params.email,\n      }\n    }\n    return res.status(400).json([{signup: false, message: 'Параметр email не передан'}]);\n  }\n\n  resourse.signup = async function (req, res) {\n    try {\n      const userFields = resourse.getUserFields(req, res);\n      const valid = resourse.validationUserFields(userFields, res);\n      if (valid.isValid) {\n        return res.status(400).json(valid.message);\n      }\n      const criteria = resourse.getUserCriteria(req, res);\n\n      const existUser = await User.findOne(criteria)\n      if (existUser) return res.status(400).json([{signup: false, message: 'Такой email зарегистрирован'}])\n\n      const user = new User({ ...userFields, id: uniqid()})\n\n\n      await user.save()\n      const userToken = new Token({ userID: user.id , id: uniqid(), forgotEmailToken: '' })\n      await userToken.save();\n\n      const result = [{\n        signup: true,\n        user,\n        token: user.generateAuthToken(),\n      }]\n\n      return res.json(result)\n\n    } catch(err) {\n      console.log(err);\n      return res.status(500).json(err)\n    }\n  }\n\n  resourse.login = async function (req, res) {\n    const params = resourse.getUserFields(req, res);\n    if (!params.password) return res.status(400).json([{login: false, message: 'Параметр password не передан'}]);\n\n    const criteria = resourse.getUserCriteria(req);\n    const user = await User.findOne(criteria);\n\n    if (!user) return res.status(404).json([{login: false, message: 'Такой пользователь не найден'}]);\n    await user.save();\n\n    if (!await user.verifyPassword(params.password)) {\n      return res.status(400).json([{login: false, message: 'Переданный пароль не подходит'}]);\n    }\n\n    return res.json([{\n      __pack: 1,\n      login: true,\n      user,\n      token: user.generateAuthToken(),\n    }])\n  }\n\n  resourse.forgot = async function (req, res) {\n    const params = resourse.getUserFields(req, res);\n\n    if (!params.email) return res.status(400).json([{ forgot: false, message: 'Параметр email не передан' }]);\n    if (!params.captcha) return res.status(400).json([{ forgot: false, message: 'Параметр captcha не передан' }]);\n\n    const criteria = resourse.getUserCriteria(req);\n    const user = await User.findOne(criteria);\n\n    if (!user) return res.status(404).json([{login: false, message: 'Пользователь с таким email не найден в базе'}]);\n\n    const token = await crypto.randomBytes(32);\n    const userToken = await Token.findOne({userID: user.id})\n    userToken.forgotEmailToken = token.toString('hex');\n    await userToken.save();\n\n\n    let mailText = `Перейдите по ссылке чтобы изменить пароль http://localhost:3000/auth/forgot/${userToken.forgotEmailToken}`;\n\n    var mailOptions = {\n      from: 'molodoyrustik@mail.ru',\n      to: user.email,\n      subject: 'Восстановления пароля сайта Ashile.io',\n      text: mailText\n    };\n    await transporter.sendMail(mailOptions);\n\n    const result = [{\n      __pack: 1,\n      forgot: true\n    }];\n    return res.json(result);\n  }\n\n  resourse.checkForgotToken = async function (req, res) {\n    const { forgotEmailToken } = req.params;\n    if (!forgotEmailToken) {\n      return res.status(400).json([{checkForgotToken: false, message: 'Токен не был передан'}]);\n    }\n\n    const criteria = { forgotEmailToken };\n    const userToken = await Token.findOne(criteria);\n\n    if (!userToken) return res.status(404).json([{checkForgotToken: false, message: 'Пользователь с таким токеном не найден'}]);\n\n    return res.json([{\n        __pack: 1,\n        checkForgotToken: true\n    }]);\n  }\n\n  resourse.reset = async function (req, res) {\n    const params = resourse.getUserFields(req, res);\n    const { password, checkPassword, captcha, forgotEmailToken, } = params;\n\n    if (!password) return res.status(400).json([{reset: false, message: 'Параметр password не передан'}]);\n    if (!checkPassword) return res.status(400).json([{reset: false, message: 'Параметр checkPassword не передан'}]);\n    if (password !== checkPassword) return res.status(400).json([{reset: false, message: 'Пароли не совпадают'}]);\n    if (!captcha) return res.status(400).json([{reset: false, message: 'Параметр captcha не передан'}]);\n    if (!forgotEmailToken) return res.status(400).json([{reset: false, message: 'Параметр forgotEmailToken не передан'}]);\n\n    const criteria = { forgotEmailToken };\n    const userToken = await Token.findOne(criteria);\n    if (!userToken) return res.status(404).json([{reset: false, message: 'Не корректный токен'}]);\n    const { userID } = userToken;\n    userToken.forgotEmailToken = '';\n    await userToken.save();\n\n    const user = await User.findOne({id: userID});\n    if (!user) return res.status(404).json([{reset: false, message: 'Такой пользователь не найден'}]);\n    user.password = password;\n    await user.save();\n\n    return res.json([{\n      __pack: 1,\n      reset: true\n    }])\n  }\n\n  resourse.getToken = function (req) {\n    if (req.headers.authorization && req.headers.authorization.split( ' ' )[ 0 ] === 'Bearer') {\n      return req.headers.authorization.split( ' ' )[ 1 ]\n    } else if (req.headers['x-access-token']) {\n      return req.headers['x-access-token'];\n    } else if ( req.query && req.query.token ) {\n      return req.query.token\n    } else if ( req.cookies && req.cookies.token  ) {\n      return req.cookies.token\n    }\n    if (__DEV__ && ctx.config && ctx.config.jwt && ctx.config.jwt.devToken) return ctx.config.jwt.devToken\n    return null;\n  }\n\n  resourse.parseToken = function (req, res, next) {\n    const token = resourse.getToken(req)\n    req.token = token\n    next()\n  }\n\n  resourse.parseUser = function (req, res, next) {\n    const options = {\n      secret: ctx.config && ctx.config.jwt.secret || 'SECRET',\n      getToken: req => req.token,\n    }\n    jwt(options)(req, res, (err) => {\n      if (err) req._errJwt = err\n      next()\n    })\n  }\n\n  resourse.isAuth = function (req, res, next) {\n    if (req._errJwt) return next(req._errJwt)\n    if (!req.user || !req.user._id) return res.status(401).send('!req.user')\n    next()\n  }\n\n  return resourse\n}\n","import jwt from 'express-jwt'\r\nimport uniqid from 'uniqid';\r\n\r\n\r\nexport default (ctx) => {\r\n  const User = ctx.models.User;\r\n  const Domain = ctx.models.Domain;\r\n\r\n  let resourse = {};\r\n\r\n  resourse.domains = async function(req, res) {\r\n    const userID = req.user.id;\r\n    const user = await User.findOne({id: userID});\r\n\r\n    return res.json(user.domains);\r\n  }\r\n\r\n  resourse.create = async function(req, res) {\r\n    const params = req.body\r\n    if (!params.url) {\r\n      return res.status(400).json([{signup: false, message: 'Домен не передан'}]);\r\n    }\r\n    const { url } = params;\r\n\r\n    const userID = req.user.id;\r\n    const user = await User.findOne({id: userID});\r\n    const domain = new Domain({ url, id: uniqid(), })\r\n    user.domains.push(domain);\r\n    await user.save();\r\n\r\n    return res.json([{ flag: true, message: 'Домен успешно добавлен'}]);\r\n  }\r\n\r\n  resourse.edit = async function(req, res) {\r\n    const params = req.body\r\n    if (!params.url) {\r\n      return res.status(400).json([{signup: false, message: 'Домен не передан'}]);\r\n    }\r\n    if (!params.id) {\r\n      return res.status(400).json([{signup: false, message: 'Id домена не передан'}]);\r\n    }\r\n    const { url, id } = params;\r\n\r\n    const userID = req.user.id;\r\n    const user = await User.findOne({id: userID});\r\n    user.domains.find((domain) => { return domain.id === id }).url = url;\r\n    await user.save();\r\n\r\n    return res.json([{ flag: true, message: 'Домен успешно изменен'}]);\r\n  }\r\n\r\n  resourse.delete = async function(req, res) {\r\n\r\n    if (!req.params.id) {\r\n      return res.status(400).json([{signup: false, message: 'Id домена не передан'}]);\r\n    }\r\n    const { id } = req.params;\r\n\r\n    const userID = req.user.id;\r\n    const user = await User.findOne({id: userID});\r\n    user.domains = user.domains.filter((domain)=>{ return domain.id != id });\r\n    await user.save();\r\n\r\n    return res.json([{ flag: true, message: 'Домен успешно удален'}]);\r\n  }\r\n\r\n  return resourse\r\n}\r\n","import Auth from './Auth/Auth';\nimport DomainController from './DomainController/DomainController';\n\nexport default function () {\n  return {\n    Auth: Auth(...arguments),\n    DomainController: DomainController(...arguments),\n  }\n}\n","import _ from 'lodash';\nimport mongoose from 'mongoose';\nimport { AsyncRouter } from 'express-async-router';\nimport Auth from '../../resourses/Auth/Auth';\n\n\nexport default (ctx) => {\n  if (!_.has(ctx, 'resourses.Auth.signup')) throw '!resourses.Auth.signup'\n  if (!_.has(ctx, 'resourses.Auth.login')) throw '!resourses.Auth.login'\n  if (!_.has(ctx, 'resourses.Auth.validate')) throw '!resourses.Auth.validate'\n  if (!_.has(ctx, 'resourses.Auth.forgot')) throw '!resourses.Auth.forgot'\n  if (!_.has(ctx, 'resourses.Auth.checkForgotToken')) throw '!resourses.Auth.checkForgotToken'\n  if (!_.has(ctx, 'resourses.Auth.reset')) throw '!resourses.Auth.reset'\n\tconst api = AsyncRouter();\n\n  api.all('/validate', ctx.resourses.Auth.validate);\n  api.post('/signup', ctx.resourses.Auth.signup);\n  api.post('/login', ctx.resourses.Auth.login);\n  api.post('/forgot', ctx.resourses.Auth.forgot);\n  api.get('/forgot/:forgotEmailToken', ctx.resourses.Auth.checkForgotToken);\n  api.post('/reset', ctx.resourses.Auth.reset);\n\n\n\treturn api;\n}\n","import _ from 'lodash';\r\nimport mongoose from 'mongoose';\r\nimport { AsyncRouter } from 'express-async-router';\r\nimport DomainController from '../../resourses/DomainController/DomainController';\r\n\r\n\r\nexport default (ctx) => {\r\n  if (!_.has(ctx, 'resourses.DomainController.domains')) throw '!resourses.DomainController.domains'\r\n  if (!_.has(ctx, 'resourses.DomainController.create')) throw '!resourses.DomainController.create'\r\n  if (!_.has(ctx, 'resourses.DomainController.delete')) throw '!resourses.DomainController.delete'\r\n  if (!_.has(ctx, 'resourses.DomainController.edit')) throw '!resourses.DomainController.edit'\r\n\r\n\tconst api = AsyncRouter();\r\n\r\n  api.get('/', ctx.resourses.DomainController.domains);\r\n  api.post('/create', ctx.resourses.DomainController.create);\r\n  api.delete('/delete/:id', ctx.resourses.DomainController.delete);\r\n  api.put('/edit', ctx.resourses.DomainController.edit);\r\n\r\n\treturn api;\r\n}\r\n","import mongoose from 'mongoose';\nimport { AsyncRouter } from 'express-async-router';\nimport expressJwt from 'express-jwt';\nimport getAuth from './auth/auth';\nimport getDomain from './domain/domain';\n\nexport default (ctx) => {\n\tconst api = AsyncRouter();\n\n  api.all('/', () => ({ok: true, version: '1.0.1'}))\n\n  api.use('/auth', getAuth(ctx));\n\tapi.use('/domains', expressJwt({secret: ctx.config.jwt.secret}), getDomain(ctx));\n\n\n\t// api.all('/protected', expressJwt({secret: ctx.config.jwt.secret}), (req, res, next) => {\n\t// \treturn req.user;\n\t// })\n\t// api.all('/domains', expressJwt({secret: ctx.config.jwt.secret}), (req, res, next) => {\n\t// \treturn req.user.domains;\n\t// })\n\n\n\treturn api;\n}\n","import bunyan from 'bunyan';\nimport express from 'express';\nimport mongoose from 'mongoose';\nimport nodemailer from 'nodemailer';\nimport smtpTransport from 'nodemailer-smtp-transport';\nimport getMiddlewares from './middlewares/index';\nimport getModels from './models/index';\nimport getResourses from './resourses/index';\nimport getApi from './api/api';\n\n\nexport default class App {\n  constructor(params = {}) {\n    Object.assign(this, params);\n    if (!this.log) this.log = this.getLogger();\n    this.init();\n  }\n\n  getLogger(params) {\n    return bunyan.createLogger(Object.assign({\n      name: 'app',\n      src: __DEV__,\n      level: 'trace',\n    }, params))\n  }\n\n  getMiddlewares() {\n    return getMiddlewares(this);\n  }\n  getModels() {\n    return getModels(this);\n  }\n  getDatabase() {\n    return {\n      run: () => {\n        new Promise((resolve, reject) => {\n          mongoose.connect(this.config.db.url);\n          resolve();\n        });\n      }\n    }\n  }\n  getResourses() {\n    return getResourses(this);\n  }\n\n  init() {\n    this.log.trace('App init');\n    const transporter = nodemailer.createTransport(smtpTransport(this.config.nodemailer));\n    this.transporter = transporter;\n\n    this.app = express();\n    this.db = this.getDatabase();\n    this.middlewares = this.getMiddlewares();\n    this.log.trace('middlewares', Object.keys(this.middlewares));\n    this.models = this.getModels();\n    this.log.trace('models', Object.keys(this.models));\n    this.resourses = this.getResourses();\n    this.log.trace('resourses', Object.keys(this.resourses));\n\n    this.useMiddlewares();\n    this.useRoutes();\n    this.useDefaultRoute();\n\n\n  }\n\n  useMiddlewares() {\n    this.app.use(this.middlewares.reqLog);\n    this.app.use(this.middlewares.accessLogger);\n    this.app.use(this.middlewares.reqParser);\n    this.app.use(this.resourses.Auth.parseToken);\n    this.app.use(this.resourses.Auth.parseUser);\n  }\n  useRoutes() {\n    const api = getApi(this);\n    this.app.use('/api/v1', api);\n  }\n  useDefaultRoute() {\n    this.app.use((req, res, next) => {\n      const err = ('Route not found');\n      next(err);\n    });\n  }\n\n  async run() {\n    this.log.trace('App run');\n    try {\n      await this.db.run();\n    } catch (err) {\n      this.log.fatal(err);\n    }\n    return new Promise((resolve) => {\n      this.app.listen(this.config.port, () => {\n        this.log.info(`App \"${this.config.name}\" running on port ${this.config.port}!`);\n        resolve(this);\n      });\n    });\n  }\n}\n","import config from './config/index';\nimport App from './App';\n\nconst app = new App({ config });\napp.run();\n"],"names":["global","__DEV__","__PROD__","levelFn","data","err","status","duration","logStart","leftPad","method","url","reqId","logFinish","time","toFixed","length","params","req","res","next","log","child","ws","host","headers","baseUrl","referer","header","ip","connection","remoteAddress","socket","debug","body","trace","hrtime","process","logging","statusCode","getHeader","diff","on","ctx","bodyParser","json","urlencoded","extended","cookieParser","cors","error","query","stack","uuid","v4","requests","forEach","val","key","bind","responses","accessLogger","arguments","reqParser","catchError","reqLog","extendReqRes","DomainSchema","mongoose","Schema","String","unique","model","bcryptGenSalt","Promise","promisify","bcrypt","genSalt","bcryptHash","hash","bcryptCompare","compare","obj","schema","statics","isValidEmail","email","re","test","generatePassword","Math","random","toString","substr","methods","toJSON","_","omit","toObject","getIdentity","object","pick","generateAuthToken","jwt","sign","config","secret","verifyPassword","password","SALT_WORK_FACTOR","pre","isModified","then","salt","catch","DomainObject","Domain","User","Token","models","transporter","resourse","validate","user","findById","_id","message","getUserFields","validationUserFields","userFields","valid","captcha","isValid","signup","getUserCriteria","findOne","criteria","existUser","id","uniqid","save","userID","forgotEmailToken","userToken","result","login","forgot","crypto","randomBytes","token","mailText","sendMail","mailOptions","checkForgotToken","reset","checkPassword","getToken","authorization","split","cookies","devToken","parseToken","parseUser","options","_errJwt","isAuth","send","domains","create","push","domain","flag","edit","find","delete","filter","Auth","DomainController","has","api","AsyncRouter","all","resourses","post","get","put","ok","version","use","getAuth","expressJwt","getDomain","App","getLogger","init","bunyan","createLogger","getMiddlewares","getModels","resolve","reject","connect","db","getResourses","nodemailer","createTransport","smtpTransport","app","express","getDatabase","middlewares","useMiddlewares","useRoutes","useDefaultRoute","getApi","run","fatal","listen","port","info","name"],"mappings":"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"}